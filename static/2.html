<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>花型模特展示系统</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/bootstrap-slider/9.4.1/css/bootstrap-slider.css" rel="stylesheet">
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
      <style>
          #ex1Slider .slider-selection {
              background: #e2e2e2;
          }

          #RGB {
              height: 20px;
              background: rgb(128, 128, 128);
          }

          #RC .slider-selection {
              background: #FF8282;
          }

          #RC .slider-handle {
              background: red;
          }

          #GC .slider-selection {
              background: #428041;
          }

          #GC .slider-handle {
              background: green;
          }

          #BC .slider-selection {
              background: #8283FF;
          }

          #BC .slider-handle {
              border-bottom-color: blue;
          }

          #R, #G, #B {
              width: 300px;
          }
      </style>
  </head>
  <body>
    <h1>花型模特展示系统</h1>
    <div class="row">
        <div class="col-md-4">
            <div class="row">
                <div class="col-md-6"><img src="models/1781a.png" onclick="changePath('model_id',1781)"
                                           class="img-thumbnail model_img"></div>
                <div class="col-md-6"><img src="models/1791a.png" onclick="changePath('model_id',1791)"
                                           class="img-thumbnail model_img"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="models/1792a.png" onclick="changePath('model_id',1792)"
                                           class="img-thumbnail model_img"></div>
                <div class="col-md-6"><img src="models/1715a.png" onclick="changePath('model_id',1715)"
                                           class="img-thumbnail model_img"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="models/1797a.png" onclick="changePath('model_id',1797)"
                                           class="img-thumbnail model_img"></div>
                <div class="col-md-6"><img src="models/1666a.png" onclick="changePath('model_id',1666)"
                                           class="img-thumbnail model_img"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="models/1717a.png" onclick="changePath('model_id',1717)"
                                           class="img-thumbnail model_img"></div>
                <div class="col-md-6"><img src="models/1716a.png" onclick="changePath('model_id',1716)"
                                           class="img-thumbnail model_img"></div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="row">
                <img src="http://127.0.0.1:5000/test?model_id=1781&pattern_no=pattern02&zoom=100"
                     class="img-responsive img-thumbnail demo_img" alt="Responsive image">

            </div>
            <div class="row">
                缩放： <input type="button" value="放大" id="a" /><span id="c">100</span></span><input type="button" value="缩小" id="b" />
            </div>

        </div>

        <div class="col-md-4">
            <div class="row">
                <div class="col-md-6"><img src="images/10.png" onclick="changePath('pattern_no','10')" class="img-thumbnail"></div>
                <div class="col-md-6"><img src="images/pattern02.png" onclick="changePath('pattern_no','pattern02')" class="img-thumbnail"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="images/pattern05.png" onclick="changePath('pattern_no','pattern05')" class="img-thumbnail"></div>
                <div class="col-md-6"><img src="images/pattern06.png" onclick="changePath('pattern_no','pattern06')" class="img-thumbnail"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="images/pattern07.png" onclick="changePath('pattern_no','pattern07')"
                                           class="img-thumbnail"></div>
                <div class="col-md-6"><img src="images/pattern08.png" onclick="changePath('pattern_no','pattern08')"
                                           class="img-thumbnail"></div>
            </div>
            <div class="row">
                <div class="col-md-6"><img src="images/66.png" onclick="changePath('pattern_no','66')"
                                           class="img-thumbnail"></div>
                <div class="col-md-6"><img src="images/55.png" onclick="changePath('pattern_no','55')"
                                           class="img-thumbnail"></div>
            </div>
        </div>
    </div>


    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap-slider/9.4.1/bootstrap-slider.min.js"></script>    
    <script type="text/javascript">
       $(function(){

			  	   $("#a").click(function(){
                       var cc = parseInt($("#c").text());
			  	       if(cc>30 || cc<200){
                           cc=cc+9;
			  	           changePath('zoom',cc);
                           $("#c").html(cc);

                       }
                       else{
                           changePath('zoom',200);
                           $("#c").html(200);

                       }
                        console.log(cc)

			  	   });
                   $("#b").click(function(){
                       var cc = parseInt($("#c").text());
                        console.log(cc)

                       if(cc>=30 || cc<=200){

                           cc=cc-9;
			  	           changePath('zoom',cc);
			  	            $("#c").html(cc);

                       }
                       else {
                           alert(cc);
                           changePath('zoom',30);
                           $("#c").html(30);
                       }

			  	   });
			  });



        var RGBChange = function () {
            $('#RGB').css('background', 'rgb(' + r.getValue() + ',' + g.getValue() + ',' + b.getValue() + ')')
        };

        var r = $('#R').slider()
            .on('slide', RGBChange)
            .data('slider');
        var g = $('#G').slider()
            .on('slide', RGBChange)
            .data('slider');
        var b = $('#B').slider()
            .on('slide', RGBChange)
            .data('slider');
        /**
         * Url分析
         * @param {String} url 要分析的URL
         * @return {Object} 返回包含'url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash'的数组
         */
        function analyseUrl(url) {
            var parse_url = /^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;
            var analyseResult = parse_url.exec(url);
            var fields = ['url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash'];
            var result = new Object();
            $.each(fields, function (n, item) {
                result[item] = analyseResult[n];
            });
            return result;
        }

        /**
         * 查询/判断url是否有某个参数,如果有该参数，返回参数的值；没有返回null
         * @param {String} url 要查询的url
         * @param {String} name 要查询的参数名
         * @return {String} 参数的值
         */
        function hasParameter(url, name) {
            var urlAnalyse = analyseUrl(url);
            var urlParam = urlAnalyse.query;
            if (typeof(urlParam) != 'undefined') {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                var r = urlParam.match(reg);
                if (r != null) {
                    return unescape(r[2]);
                }
                //有该参数，但是值为null
                return "";
            }
            //没有该参数
            return null;
        }

        /**
         * url增加参数
         * @param {String} url 要修改的url
         * @param {String} name 要增加的参数名
         * @param {String} value 对应的参数值
         * @return {String} 修改后的结果
         */
        function addParameter(url, name, value) {
            var newUrl = url;
            var paremeter = name + "=" + value;
            if (url.match("[\?]")) {
                //存在其他参数，用&连接
                newUrl = url + "&" + paremeter;
            } else {
                //没有参数，用?连接
                newUrl = url + "?" + paremeter;
            }
            return newUrl;
        }

        /**
         * 替换Url参数
         * @param {String} url 要修改的Url
         * @param {String} name 要修改的参数名
         * @param {String} value 对应的参数的值
         * @return {String} 修改后的Url
         */
        function replaceParameter(url, name, value) {
            var newUrl = url;
            if (hasParameter(url, name)) {
                //有该参数，修改
                var replacedPar = eval('/(' + name + '=)([^&]*)/gi');
                newUrl = url.replace(replacedPar, name + '=' + value);
            } else {
                //没有该参数，增加
                newUrl = addParameter(url, name, value);
            }
            return newUrl;
        }

        function changePath(a, b) {
            //修改url中的model_id，folder
            var path = $(".demo_img")[0].src;
            var new_path=replaceParameter(path,a,b);
            $('.demo_img').attr('src',new_path);
           // console.log(new_path);

        }




    </script>
  </body>
</html>